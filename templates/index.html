{% extends "base.html" %}
{% block content %}
<h2 class="mb-4">Welcome, {{ user.username }}</h2>

<div class="card mb-4">
  <div class="card-header">Add Task</div>
  <div class="card-body">
    <form method="POST" action="{{ url_for('add_task') }}">
      <div class="mb-3">
        <label class="form-label">Title</label>
        <input type="text" name="title" class="form-control" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Description</label>
        <input type="text" name="description" class="form-control">
      </div>
      <div class="mb-3">
        <label class="form-label">Reminder (optional)</label>
        <input type="datetime-local" name="reminder" class="form-control">
      </div>
      <button type="submit" class="btn btn-primary">Add Task</button>
    </form>
  </div>
</div>

<h3>Your Tasks</h3>
<ul class="list-group">
  {% for task in tasks %}
  <li class="list-group-item d-flex justify-content-between align-items-center {% if task.completed %}list-group-item-success{% endif %}">
    <div>
      <strong>{{ task.title }}</strong> - {{ task.description }}
      {% if task.reminder %}
      <span class="badge bg-info text-dark">Reminder: {{ task.reminder.strftime('%Y-%m-%d %H:%M') }}</span>
      {% endif %}
    </div>
    <div>
      {% if not task.completed %}
      <a href="{{ url_for('complete_task', task_id=task.id) }}" class="btn btn-sm btn-success">Complete</a>
      {% endif %}
      <a href="{{ url_for('delete_task', task_id=task.id) }}" class="btn btn-sm btn-danger">Delete</a>
    </div>
  </li>
  {% else %}
  <li class="list-group-item">No tasks added yet.</li>
  {% endfor %}
</ul>
{% endblock %}
